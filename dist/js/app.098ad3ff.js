(function(){"use strict";var e={5145:function(e,t,n){var l=n(9242),a=n(3396);function i(e,t,n,l,i,u){const r=(0,a.up)("a-page-header"),s=(0,a.up)("HomeView");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(r,{style:{border:"1px solid rgb(235, 237, 240)"},title:"内存管理项目","sub-title":"同济大学软件学院 张靖凯 2455650395@qq.com"}),(0,a.Wm)(s)],64)}n(7658);var u=n(4870),r=n(7139);class s{constructor(e,t){this.page=e,this.value=t,this.prev=null,this.next=null}}var o={LRUCache:class{constructor(e){this.capacity=e,this.cache=new Map,this.head=null,this.tail=null}get(e){if(!this.cache.has(e))return-1;const t=this.cache.get(e);return this.moveToHead(t),t.value}put(e,t){if(this.cache.has(e)){const n=this.cache.get(e);n.value=t,this.moveToHead(n)}else{const n=new s(e,t);this.cache.size>=this.capacity&&this.removeTail(),this.head?(n.next=this.head,this.head.prev=n,this.head=n):(this.head=n,this.tail=n),this.cache.set(e,n)}}moveToHead(e){e!==this.head&&(e===this.tail?(this.tail=e.prev,this.tail.next=null):(e.prev.next=e.next,e.next.prev=e.prev),e.next=this.head,this.head.prev=e,e.prev=null,this.head=e)}removeTail(){this.tail&&(this.cache.delete(this.tail.page),this.head===this.tail?(this.head=null,this.tail=null):(this.tail=this.tail.prev,this.tail.next=null))}getHead(){return this.head}getTail(){return this.tail}},linklist:class e{constructor(){this.item=0,this.next=null}length(){return this.item}append(t){let n=this;while(null!=n.next)n=n.next;n.next=new e,n.next.item=t,this.item++}deleteLast(){if(0==this.length())return;let e=this;while(null!=e.next.next)e=e.next;let t=e.next.item;return e.next=null,this.item--,t}findIndex(e){let t=this.next;for(let n=1;null!=t;++n){if(t.item==e)return n;t=t.next}return-1}movetoHead(e){if(e>this.length()||0==e)return!1;let t=this;for(let l=0;l<e-1;l++)t=t.next;let n=t.next;return t.next=n.next,n.next=this.next,this.next=n,!0}insertHead(t){let n=this.next;this.next=new e,this.next.item=t,this.next.next=n,this.item++}}};const d=e=>((0,a.dD)("data-v-8fcf747e"),e=e(),(0,a.Cn)(),e),h=d((()=>(0,a._)("p",{style:{"font-size":"22px"}},[(0,a._)("b",null,"请求调页存储管理方式模拟")],-1))),c=d((()=>(0,a._)("p",null,[(0,a._)("b",null,"Memory")],-1))),f={class:"view-button-label"},p={class:"view-button-label"},v=d((()=>(0,a._)("p",null,[(0,a._)("b",null,"已执行条数")],-1))),m=d((()=>(0,a._)("p",null,[(0,a._)("b",null,"缺页数")],-1))),x=d((()=>(0,a._)("p",null,[(0,a._)("b",null,"缺页率")],-1))),w={key:0},g={style:{padding:"24px",background:"#fff",textAlign:"center"}},y={key:0},_=4,b=32,I=320;var W={__name:"HomeView",setup(e){let t=(0,u.iH)(0),n=(0,u.iH)(0),l=new o.linklist,i=(0,u.iH)([]),s=(0,u.iH)([]),d=(0,u.iH)([]),W=(0,u.iH)([]),H=(0,a.Fl)((()=>0===t.value?"0%":(n.value/t.value*100).toFixed(2)+"%"));const k=(0,u.iH)([{title:"调入逻辑页",dataIndex:"pageId"},{title:"调至内存块",dataIndex:"block"},{title:"调出逻辑页",dataIndex:"pageOut"}]);let O=(0,u.iH)([]);const M=(0,u.iH)([{title:"指令ID",dataIndex:"instructionId"},{title:"逻辑页号",dataIndex:"pageId"},{title:"所在内存块号",dataIndex:"inMemory"},{title:"所在内存地址",dataIndex:"address"},{title:"下一条指令ID",dataIndex:"nextInstructionId"}]);let j=(0,u.iH)([]);const S=()=>{for(let e=0;e<_;e++)i.value.push({id:e,address:e+"0",length:10,content:"null"})},z=()=>{for(let e=0;e<b;e++)s.value.push({id:e,valid:!1,memoryId:null})},T=()=>{let e=Math.floor(Math.random()*(I-1)),t=0;d.value.push(e),t++,d.value.push(e+1),t++;while(t<I){if(e=Math.floor(Math.random()*e),d.value.push(e),t++,t===I)return;if(d.value.push(e+1),t++,t===I)return;if(e=Math.floor(Math.random()*(I-e-4)+e+2),d.value.push(e),t++,t===I)return;if(d.value.push(e+1),t++,t===I)return}},U=e=>{let n,l=Math.floor(e/10);if(0==s.value[l].valid)n={instructionId:e,pageId:l,inMemory:"null",address:"null",nextInstructionId:d.value[t.value+1]},W.value.push(n);else{let a=s.value[l].memoryId,u=parseInt(i.value[a].address,10)+e%10;n={instructionId:e,pageId:l,imMemory:a,address:u,nextInstructionId:d.value[t.value+1]},W.value.push(n)}j.value.push(n)},C=()=>{let e,a=d.value[t.value],i=Math.floor(a/10),u=s.value[i];0==u.valid?(U(a),n.value+=1,e=D(u),O.value.push(e),s.value[i].valid=!0,s.value[i].memoryId=e.block,U(a),"null"!=e.pageOut&&(s.value[e.pageOut].valid=!1,s.value[e.pageOut].memoryId="null")):(l.movetoHead(l.findIndex(u.memory_id)),U(a)),t.value+=1},D=e=>{if(!(l.length()<_)){let t=l.deleteLast(),n=i.value[t].content;return i.value[t].content=e.id,l.insertHead(t),{pageId:e.id,block:t,pageOut:n}}for(let t=0;t<_;t++)if("null"==i.value[t].content)return i.value[t].content=e.id,l.insertHead(t),{pageId:e.id,block:t,pageOut:"null"}};return(0,a.wF)((()=>{S(),z(),T()})),(e,l)=>{const s=(0,a.up)("a-layout-header"),o=(0,a.up)("a-layout"),d=(0,a.up)("a-button"),_=(0,a.up)("a-col"),b=(0,a.up)("a-row"),I=(0,a.up)("a-table"),W=(0,a.up)("a-layout-sider"),S=(0,a.up)("a-layout-content"),z=(0,a.up)("a-layout-footer");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{class:"a-layout-header",style:{background:"#fff"}},{default:(0,a.w5)((()=>[h])),_:1})])),_:1}),(0,a.Wm)(o,{"has-sider":""},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{style:{overflow:"auto",height:"100vh",position:"sticky"},theme:"light",width:"400px"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{justify:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{span:24,style:{"text-align":"center"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"primary",onClick:C},{default:(0,a.w5)((()=>[(0,a.Uk)(" 单步执行 ")])),_:1})])),_:1})])),_:1}),(0,a.Wm)(b,{justify:"center",style:{"margin-top":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{span:24,style:{"text-align":"center"}},{default:(0,a.w5)((()=>[c])),_:1})])),_:1}),(0,a.Wm)(b,{justify:"center"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,u.SU)(i),(e=>((0,a.wg)(),(0,a.j4)(_,{span:24,style:{"text-align":"center"},key:e.id},{default:(0,a.w5)((()=>[(0,a._)("label",f,(0,r.zw)(e.id),1),(0,a.Wm)(d,{class:"view-button",type:"dashed",disabled:"",ghost:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.content),1)])),_:2},1024),(0,a._)("label",p,"address: "+(0,r.zw)(e.address),1)])),_:2},1024)))),128))])),_:1}),(0,a.Wm)(b,{justify:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{style:{"text-align":"center"},span:8},{default:(0,a.w5)((()=>[v])),_:1}),(0,a.Wm)(_,{style:{"text-align":"center"},span:8},{default:(0,a.w5)((()=>[m])),_:1}),(0,a.Wm)(_,{style:{"text-align":"center"},span:8},{default:(0,a.w5)((()=>[x])),_:1})])),_:1}),(0,a.Wm)(b,{justify:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{style:{"text-align":"center"},span:8},{default:(0,a.w5)((()=>[(0,a._)("p",null,[(0,a._)("b",null,(0,r.zw)((0,u.SU)(t)),1)])])),_:1}),(0,a.Wm)(_,{style:{"text-align":"center"},span:8},{default:(0,a.w5)((()=>[(0,a._)("p",null,[(0,a._)("b",null,(0,r.zw)((0,u.SU)(n)),1)])])),_:1}),(0,a.Wm)(_,{style:{"text-align":"center"},span:8},{default:(0,a.w5)((()=>[(0,a._)("p",null,[(0,a._)("b",null,(0,r.zw)((0,u.SU)(H)),1)])])),_:1})])),_:1}),(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,{span:24},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{columns:k.value,"data-source":(0,u.SU)(O),bordered:""},{bodyCell:(0,a.w5)((({column:e,text:t})=>["name"===e.dataIndex?((0,a.wg)(),(0,a.iD)("a",w,(0,r.zw)(t),1)):(0,a.kq)("",!0)])),_:1},8,["columns","data-source"])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S,{style:{margin:"24px 16px 0",overflow:"initial"}},{default:(0,a.w5)((()=>[(0,a._)("div",g,[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,{span:24},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{columns:M.value,"data-source":(0,u.SU)(j),bordered:""},{bodyCell:(0,a.w5)((({column:e,text:t})=>["name"===e.dataIndex?((0,a.wg)(),(0,a.iD)("a",y,(0,r.zw)(t),1)):(0,a.kq)("",!0)])),_:1},8,["columns","data-source"])])),_:1})])),_:1})])])),_:1}),(0,a.Wm)(z,{style:{textAlign:"center"}},{default:(0,a.w5)((()=>[(0,a.Uk)(" 2023 Created by Jingkai Zhang ")])),_:1})])),_:1})])),_:1})],64)}}},H=n(89);const k=(0,H.Z)(W,[["__scopeId","data-v-8fcf747e"]]);var O=k,M={name:"App",components:{HomeView:O}};const j=(0,H.Z)(M,[["render",i]]);var S=j,z=n(7241);n(2467);(0,l.ri)(S).use(z.ZP).mount("#app")}},t={};function n(l){var a=t[l];if(void 0!==a)return a.exports;var i=t[l]={exports:{}};return e[l].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,l,a,i){if(!l){var u=1/0;for(d=0;d<e.length;d++){l=e[d][0],a=e[d][1],i=e[d][2];for(var r=!0,s=0;s<l.length;s++)(!1&i||u>=i)&&Object.keys(n.O).every((function(e){return n.O[e](l[s])}))?l.splice(s--,1):(r=!1,i<u&&(u=i));if(r){e.splice(d--,1);var o=a();void 0!==o&&(t=o)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[l,a,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,i,u=l[0],r=l[1],s=l[2],o=0;if(u.some((function(t){return 0!==e[t]}))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(s)var d=s(n)}for(t&&t(l);o<u.length;o++)i=u[o],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},l=self["webpackChunkoslab_2"]=self["webpackChunkoslab_2"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=n.O(void 0,[998],(function(){return n(5145)}));l=n.O(l)})();
//# sourceMappingURL=app.098ad3ff.js.map